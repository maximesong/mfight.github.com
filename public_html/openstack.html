<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>openstack</title>
    <meta name="generator" content="muse.el" />
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="style.css" /><script type="text/javascript"src="scripts/shCore.js"></script><script type="text/javascript"src="scripts/shBrushCpp.js"></script><script type="text/javascript"src="scripts/shBrushBash.js"></script><link href="styles/shCore.css" rel="stylesheettype="text/css" /><link href="styles/shThemeEmacs.css" rel="stylesheet"type="text/css" /> <script type="text/javascript"> var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-25182468-1']);_gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga, s);})();</script>
  </head>
  <body>
    <h1>openstack</h1>
<!-- menu start here -->
     <div class="menu">
        <div class="menuitem">
          <a href=" ../index.html">Home</a>
        </div>

        <div class="menuitem">
          <a href=" index.html">Computer</a>
        </div>
       </div>
     <div class="menub">       
	<div class="menuitemb">
          <a href=" francais.html">Français</a>
        </div>

        <div class="menuitemb">
          <a href=" word_list.html">Wordlist</a>
        </div>
      </div>
    <!-- menu ends here -->
    <!-- Page published by Emacs Muse begins here -->
<h2>脚本安装</h2>

<p class="first">通过devstack.org提供的shell脚本来安装和配置openstack。
<h3>安装Ubtuntu 11.10(Oneiric)</h3></p>

<p>最稳妥的是安装Ubuntu Server 11.10 64bits。我在Unbuntu Desktop Edition上也试过运行脚本，但是会出现Host Ip没有指定的情况，应该另外配置一下就可以了，但我没有继续研究下去。</p>


<h3>下载DevStack脚本</h3>

<h4>安装git</h4>

<p class="first">下载脚本需要用到git，如果你的系统还没有安装过git，可以在控制台中用下面的命令安装。

<pre class="brush:bash; gutter:true; toolbar:false; ruler:false;">
sudo apt-get install git
</pre>
</p>


<h4>下载脚本</h4>

<p class="first">cd到准备存放脚本的文件夹下，然后在控制台执行下面的命令。

<pre class="brush:bash; gutter:true; toolbar:false; ruler:false;">
git clone git://github.com/cloudbuilders/devstack.git
</pre>
</p>



<h3>运行脚本</h3>

<pre class="brush:bash; gutter:true; toolbar:false; ruler:false;">
cd devstack # The folder you just cloned
./stack.sh # run the script
</pre>



<h3>安装期间</h3>

<ul>
<li>第一次安装时，脚本可能会提示你设置几个密码，不要嫌烦哦。</li>
<li>如果想要修改默认的配置，可以在顶层文件夹中新建一个localrc文件进行配置。当然你也可以直接修改现有的配置文件（我就是这么干的）。</li>
<li>安装时间可能会比较长，趁次机会，不妨看一看<a href="http://devstack.org/stack.sh.html">脚本</a>究竟干了些什么，注释还是很详细的。</li>
</ul>

<h4>可能遇到的错误</h4>

<ul>
<li>卡在某个地方

<ul>
<li>在安装python的一些程序时，我遇到过卡在<code>Downloading/Unpacking django-nose-selenium</code>的情况，尝试过修改配置文件，但没有成功，卡住的具体原因不明。</li>
<li>解决方法：手动进行安装</li>
</ul></li>
</ul>

<pre class="brush:bash; gutter:true; toolbar:false; ruler:false;">
pip install django-nose-selenium
</pre>

虽然安装的版本可能和脚本默认的不太一样，不过最后的Dashboard一切正常，那就无所谓了。

<ul>
<li>gzip: stdin: not in gzip format

<ul>
<li>尝试了很多办法，最后发现是因为一个压缩包没有下载完整，脚本再次运行时也没有重新下载，导致解压的这一步一直报错</li>
<li>解决方法：手动下载完整的压缩包进行覆盖，重新运行脚本

<ul>
<li>当然我想删掉压缩包，重新运行脚本可能也是可以的。</li>
</ul></li>
</ul></li>
</ul>



<h3>安装完成</h3>

<p class="first">安装完成后会提示你各个配置信息,包括默认的用户名和密码。
比如访问Dashboard的地址<code>horizon is now available at http://10.0.2.15/</code>
<h4>访问Dashboard</h4></p>

<p>即使Ubuntu Server默认没有安装桌面环境，一样可以通过控制台中的浏览器访问Dashboard

<pre class="brush:bash; gutter:true; toolbar:false; ruler:false;">
w3m http://10.0.2.15
</pre>

<h5>登录页面是这样的</h5></p>

<p class="image"><img src="w3m_login.png" alt="" /></p>


<h5>登录后</h5>

<p class="image"><img src="w3m_logged.png" alt="" /></p>




<h3>Virtualbox</h3>

<p class="first">如果是在Virtualbox中安装openstack，可以通过NAT和Port Forwarding在原来的系统(Host)内访问虚拟机中系统(Guest)的服务。其原理是将发向Host的某个Ip地址和端口的请求转发给Guest的某个Ip地址和端口，达到在Host上访问Guest的目的，具体设置步骤如下</p>

<ul>
<li>右键单击虚拟机系统，选择Settings</li>
<li>在左边的选项栏中选择Network</li>
<li>点击Advanced</li>
<li>点击Port Forwarding,进行设置</li>
</ul>

<h5>网络设置</h5>

<p class="image"><img src="network_settings.png" alt="" /></p>


<h5>Port Forwaring设置</h5>

<p class="image"><img src="port_forwarding.png" alt="" /></p>


<h5>登录</h5>

<p class="image"><img src="openstack_login.png" alt="" /></p>


<h5>登录后</h5>

<p class="image"><img src="openstack_logged.png" alt="" /></p>




<!-- Emacs Muse Footer -->

<div id="footer" align="center">
	<hr>
    Last Updated: January 11, 2012  
<span>  &nbsp &nbsp;    </span>       
   <img border="0" src="http://cc.amazingcounters.com/counter.php?i=3007311&c=9022246" alt="Hit Counter">
	<span>  &nbsp &nbsp;    </span>    
  <script language="javascript" type="text/javascript" src="http://js.users.51.la/5290848.js"></script>
<noscript><a href="http://www.51.la/?5290848" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/5290848.asp" style="border:none" /></a></noscript>

</div>
	<script type="text/javascript">
	     SyntaxHighlighter.all()
	</script>
</body>
</html>

